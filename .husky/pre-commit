#!/usr/bin/env sh

echo "Running pre-commit checks (mirrors GitHub Actions)..."
echo ""

# Run type checking
echo "Type checking..."
npm run typecheck
if [ $? -ne 0 ]; then
  echo "Type check failed. Commit aborted."
  exit 1
fi
echo "Type check passed"
echo ""

# Run linting
echo "Linting..."
npm run lint
if [ $? -ne 0 ]; then
  echo "Linting failed. Commit aborted."
  exit 1
fi
echo "Linting passed"
echo ""

# Run tests
echo "Running tests..."
npm test
if [ $? -ne 0 ]; then
  echo "Tests failed. Commit aborted."
  exit 1
fi
echo "Tests passed"
echo ""

# Run production build (catches build-time errors like the next-themes import issue)
echo "Production build..."
NODE_ENV=production npm run build
if [ $? -ne 0 ]; then
  echo "Build failed. Commit aborted."
  exit 1
fi
echo "Build passed"
echo ""

echo "All pre-commit checks passed!"
